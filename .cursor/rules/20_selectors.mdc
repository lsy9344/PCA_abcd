---
title: "ì›¹ ì…€ë ‰í„° ê´€ë¦¬ ì •ì±… ë° ë§¤ì¥ë³„ êµ¬ì¡°"
order: 20
category: "implementation"
alwaysApply: false
tags: ["selectors", "html", "playwright", "web"]
lastUpdated: "2024-01-15"
description: "Playwright ìë™í™”ì—ì„œ ì‚¬ìš©í•˜ëŠ” HTML ì…€ë ‰í„° ê´€ë¦¬ ì •ì±…"
---

# ì‚¬ì´íŠ¸ êµ¬ì¡° ë° ì…€ë ‰í„° ìš”ì•½í‘œ

ì´ ë¬¸ì„œëŠ” Playwright ìë™í™”ì—ì„œ ì‚¬ìš©í•˜ëŠ”  
í•µì‹¬ HTML ìš”ì†Œ(ì…€ë ‰í„°)ì™€ êµ¬ì¡°ë¥¼ í•œëˆˆì— ì •ë¦¬í•œ í‘œì…ë‹ˆë‹¤.  
ì´ í‘œë¥¼ ê¸°ë°˜ìœ¼ë¡œ Playwright ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ê° ê¸°ëŠ¥ì„ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## A ì‚¬ì´íŠ¸ ì£¼ìš” ê¸°ëŠ¥ë³„ ì…€ë ‰í„° ì •ë¦¬

| ë‹¨ê³„        | ê¸°ëŠ¥ ì„¤ëª…                | ì…€ë ‰í„°/íƒ€ì…                | ë¹„ê³                   |
|-------------|-------------------------|----------------------------|-----------------------|
| 1           | ì¸íŠ¸ë¡œ íŒì—… ë‹«ê¸°        | `#skip` (ID)               | ë²„íŠ¼                  |
| 2           | ê³µì§€ íŒì—… ë‹«ê¸°          | `#popupCancel` (ID)        | ë²„íŠ¼                  |
| 3           | íŠœí† ë¦¬ì–¼/ê¸°íƒ€ íŒì—… ë‹«ê¸° | ESC, `//*[contains(text(), 'ë‹«ê¸°')]` (XPATH) | ì—¬ëŸ¬ íŒì—… ëŒ€ì‘        |
| 4           | ì•„ì´ë”” ì…ë ¥             | `#id` (ID)                 | í…ìŠ¤íŠ¸ ì…ë ¥           |
| 5           | ë¹„ë°€ë²ˆí˜¸ ì…ë ¥           | `#password` (ID)           | í…ìŠ¤íŠ¸ ì…ë ¥           |
| 6           | ë¡œê·¸ì¸ ë²„íŠ¼             | `#login` (ID)              | ë²„íŠ¼                  |
| 7           | ë¡œê·¸ì¸ í›„ ì•ˆë‚´ íŒì—… ë‹«ê¸°| `#gohome` (ID)             | ë²„íŠ¼                  |
| 8           | ì°¨ëŸ‰ë²ˆí˜¸ ì…ë ¥           | `#carNumber` (ID)          | í…ìŠ¤íŠ¸ ì…ë ¥           |
| 9           | ì°¨ëŸ‰ ê²€ìƒ‰ ë²„íŠ¼          | `button[name="search"]` (NAME), `.btn-search` (CLASS), `button:has-text("ê²€ìƒ‰")` | ì—¬ëŸ¬ ë°©ì‹ ëŒ€ì‘ |
| 10          | ì°¨ëŸ‰ ì„ íƒ ë²„íŠ¼          | `#next` (ID), `button:has-text("ì°¨ëŸ‰ ì„ íƒ")` | í…ìŠ¤íŠ¸/ID ëŒ€ì‘      |
| 11          | ë³´ìœ  í• ì¸ê¶Œ í…Œì´ë¸”      | `#productList tr` (ID + TR) | í• ì¸ê¶Œ ì •ë³´           |
| 12          | ë§¤ì¥ í• ì¸ ì´ë ¥ í…Œì´ë¸”   | `tbody#myDcList tr` (ID + TR)| ë‚´ì—­ ì¶”ì¶œ            |
| 13          | ì „ì²´ í• ì¸ ì´ë ¥ í…Œì´ë¸”   | `#allDcList tr` (ID + TR)   | ë‚´ì—­ ì¶”ì¶œ             |
| 14          | ì¿ í° ì ìš© ë²„íŠ¼          | `button:has-text("ì ìš©")` (í…ìŠ¤íŠ¸), ë˜ëŠ” ê° í–‰ ë‚´ë¶€ | tr ë‚´ ë²„íŠ¼ ë°˜ë³µ      |
| 15          | í™•ì¸/ì™„ë£Œ íŒì—… ë²„íŠ¼     | `button:has-text("í™•ì¸")` (í…ìŠ¤íŠ¸) | ì ìš© í™•ì¸/ì™„ë£Œ      |

---

## ì…€ë ‰í„° ì‚¬ìš© ì˜ˆì‹œ (Playwright ì½”ë“œ)

```python
# íŒì—… ë‹«ê¸°
await page.click("#skip")
await page.click("#popupCancel")
await page.keyboard.press("Escape")
await page.locator('button:has-text("ë‹«ê¸°")').click()

# ë¡œê·¸ì¸
await page.fill("#id", "ì•„ì´ë””")
await page.fill("#password", "ë¹„ë°€ë²ˆí˜¸")
await page.click("#login")

# ì°¨ëŸ‰ ê²€ìƒ‰
await page.fill("#carNumber", "123ê°€4567")
await page.click('button[name="search"]')

# ì°¨ëŸ‰ ì„ íƒ
await page.click("#next")
# ë˜ëŠ”
await page.locator('button:has-text("ì°¨ëŸ‰ ì„ íƒ")').click()

# í• ì¸ê¶Œ ì •ë³´ ì¶”ì¶œ (í…Œì´ë¸” ë°˜ë³µ)
rows = await page.locator("#productList tr").all()
for row in rows:
    text = await row.inner_text()
    # í•„ìš”í•œ ì •ë³´ íŒŒì‹±

# ì¿ í° ì ìš©
await page.locator('button:has-text("ì ìš©")').click()

# íŒì—… í™•ì¸
await page.locator('button:has-text("í™•ì¸")').click()
```

---

## ì…€ë ‰í„° ê´€ë¦¬ ì •ì±…

### 1. ê¸°ë³¸ ì›ì¹™

-   **ë§¤ì¥ë³„ ì™„ì „ ë¶„ë¦¬**: **ëª¨ë“  ì…€ë ‰í„°ëŠ” ë§¤ì¥ë³„ë¡œ ë‹¤ë¥´ë‹¤.** A ë§¤ì¥ê³¼ B ë§¤ì¥ì˜ ì›¹ì‚¬ì´íŠ¸ëŠ” HTML êµ¬ì¡°ê°€ ì „í˜€ ë‹¤ë¥´ë¯€ë¡œ, ì…€ë ‰í„°ë¥¼ ê³µìœ í•˜ë ¤ëŠ” ì‹œë„ëŠ” ì ˆëŒ€ ê¸ˆì§€ëœë‹¤.
-   **ì„¤ì • íŒŒì¼ ì§‘ì¤‘ ê´€ë¦¬**: ëª¨ë“  ì…€ë ‰í„°ëŠ” ë§¤ì¥ë³„ ì„¤ì • íŒŒì¼ì— ê·¸ë£¹í™”í•˜ì—¬ ì •ì˜í•œë‹¤. ì½”ë“œ ì•ˆì— ì…€ë ‰í„° ë¬¸ìì—´ì„ í•˜ë“œì½”ë”©í•˜ëŠ” ê²ƒì„ ê¸ˆì§€í•œë‹¤.
-   **êµ¬ì²´ì ì´ê³  ì•ˆì •ì ì¸ ì…€ë ‰í„° ì‚¬ìš©**: `id`ê°€ ê°€ì¥ ì•ˆì •ì ì´ë©°, ì—†ì„ ê²½ìš° `name`, `class` ìˆœìœ¼ë¡œ ì‚¬ìš©í•œë‹¤. ë™ì ìœ¼ë¡œ ë³€í•˜ëŠ” `class` ì´ë¦„ì€ í”¼í•˜ê³ , í…ìŠ¤íŠ¸ ê¸°ë°˜ ì…€ë ‰í„°(`:has-text("í…ìŠ¤íŠ¸")`)ëŠ” ìµœí›„ì˜ ìˆ˜ë‹¨ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.

### 2. ì…€ë ‰í„° ì„¤ì • êµ¬ì¡°

```yaml
# store_config.yaml ì˜ˆì‹œ
selectors:
  login:
    username_input: "#id"
    password_input: "#password"
    login_button: "#login"
  search:
    car_number_input: "#carNumber"
    search_button: "button[name='search']"
    search_result_table: "#tableID"
  coupon:
    product_list: "#productList tr"
    my_discount_list: "#myDcList tr"
    total_discount_list: "#allDcList tr"
    apply_button: "button:has-text('ì ìš©')"
```

---

## B ë§¤ì¥ í• ì¸ë‚´ì—­ í…Œì´ë¸” êµ¬ì¡°

### ğŸª B ë§¤ì¥ HTML êµ¬ì¡° íŠ¹ì§•
B ë§¤ì¥ì€ ë‹¤ë¥¸ ë§¤ì¥ê³¼ ë‹¤ë¥¸ ê³ ìœ í•œ HTML êµ¬ì¡°ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.

#### **í…Œì´ë¸” êµ¬ì¡°**
- **í…Œì´ë¸” ID**: ì—†ìŒ (í´ë˜ìŠ¤ ê¸°ë°˜ ì‹ë³„)
- **í–‰ í´ë˜ìŠ¤**: `tr.ev_dhx_skyblue` (ì§ìˆ˜ í–‰), `tr.odd_dhx_skyblue` (í™€ìˆ˜ í–‰)
- **ë°ì´í„° êµ¬ì¡°**: `ë²ˆí˜¸ | í• ì¸ê°’ | ë“±ë¡ì | ë“±ë¡ì¼`

#### **ì…€ë ‰í„° ìš°ì„ ìˆœìœ„**
```yaml
# B ë§¤ì¥ í• ì¸ë‚´ì—­ í…Œì´ë¸” ì…€ë ‰í„° (ìš°ì„ ìˆœìœ„ ìˆœ)
discount_selectors:
  - "tr.ev_dhx_skyblue"     # ê¸°ë³¸ í–‰ (ì§ìˆ˜)
  - "tr.odd_dhx_skyblue"    # í™€ìˆ˜ í–‰
  - "tr.rowselected"        # ì„ íƒëœ í–‰
  - "#gridDtl tr"           # ê·¸ë¦¬ë“œ ì»¨í…Œì´ë„ˆ ë‚´ í–‰
  - ".gridbox tr"           # ê·¸ë¦¬ë“œë°•ìŠ¤ ë‚´ í–‰
```

#### **ì¿ í° ë§¤í•‘**
```yaml
# B ë§¤ì¥ ì¿ í° ì´ë¦„ â†’ í‚¤ ë§¤í•‘
coupon_key_mapping:
  "ë¬´ë£Œ 1ì‹œê°„í• ì¸": "FREE_COUPON"
  "ìœ ë£Œ 30ë¶„í• ì¸": "PAID_COUPON"
```

#### **ë°ì´í„° íŒŒì‹± ì˜ˆì‹œ**
```
ì‹¤ì œ í–‰ ë°ì´í„°: "1 | ìœ ë£Œ 30ë¶„í• ì¸ | 215(ì´ìˆ˜ì—´) | 2025-08-16 08:59:07.977"
íŒŒì‹± ê²°ê³¼: cell_texts[1] = "ìœ ë£Œ 30ë¶„í• ì¸" â†’ PAID_COUPON
```

---

## ë§¤ì¥ë³„ HTML êµ¬ì¡° ë¹„êµí‘œ

### ğŸ†š A vs B vs C ë§¤ì¥ êµ¬ì¡° ì°¨ì´ì 

| í•­ëª© | A ë§¤ì¥ | B ë§¤ì¥ | C ë§¤ì¥ |
|------|--------|--------|--------|
| **í…Œì´ë¸” ID** | `#myDcList`, `#allDcList` | ì—†ìŒ (í´ë˜ìŠ¤ ê¸°ë°˜) | `tbody[id='discountlist']` |
| **í–‰ í´ë˜ìŠ¤** | ì¼ë°˜ `tr` | `tr.ev_dhx_skyblue`, `tr.odd_dhx_skyblue` | ì¼ë°˜ `tr` |
| **ì¿ í°ëª… ìœ„ì¹˜** | cell[2] (í• ì¸ê¶Œëª…) | cell[1] (í• ì¸ê°’) | cell[2] (í• ì¸ê¶Œëª…) |
| **ìˆ˜ëŸ‰ ìœ„ì¹˜** | cell[3] (ìˆ˜ëŸ‰) | ì—†ìŒ (í•­ìƒ 1ê°œ) | cell[3] (ìˆ˜ëŸ‰) |
| **ë°ì´í„° ì˜ˆì‹œ** | `ë‚ ì§œ \| í• ì¸ê¶Œëª… \| ìˆ˜ëŸ‰` | `ë²ˆí˜¸ \| í• ì¸ê°’ \| ë“±ë¡ì \| ë“±ë¡ì¼` | `ë¹ˆê°’ \| ë‚ ì§œ \| í• ì¸ê¶Œëª… \| ìˆ˜ëŸ‰` |

### ğŸ”§ ê³µí†µ ê³„ì‚°ê¸° ë§¤ì¥ ê°ì§€ ë¡œì§

```python
# ë§¤ì¥ë³„ êµ¬ì¡° ìë™ ê°ì§€ (shared/utils/common_coupon_calculator.py)
if any(name in cell_texts[1] for name in ["ë¬´ë£Œ 1ì‹œê°„í• ì¸", "ìœ ë£Œ 30ë¶„í• ì¸", "ë¬´ë£Œ", "ìœ ë£Œ"]):
    # Bë§¤ì¥ íŒ¨í„´: 2ë²ˆì§¸ ì¹¼ëŸ¼ì— ì¿ í°ëª…
    coupon_cell = cell_texts[1]
    quantity = 1  # Bë§¤ì¥ì€ í•­ìƒ 1ê°œì”©
    
elif any(name in cell_texts[2] for name in ["ë¬´ë£Œ", "ìœ ë£Œ", "í• ì¸ê¶Œ"]):
    # A/Cë§¤ì¥ íŒ¨í„´: 3ë²ˆì§¸ ì¹¼ëŸ¼ì— ì¿ í°ëª…
    coupon_cell = cell_texts[2]
    quantity_cell = cell_texts[3]
    # ìˆ˜ëŸ‰ ìˆ«ì ì¶”ì¶œ ("1ë§¤" -> 1)
    quantity_match = re.search(r'(\d+)', quantity_cell)
    quantity = int(quantity_match.group(1)) if quantity_match else 1
```

---

## C ë§¤ì¥ ì¿ í° ë§í¬ íŒë³„ ê·œì¹™

### ğŸ¯ C ë§¤ì¥ ì¿ í° ë§í¬ íŠ¹ì§•
C ë§¤ì¥ì—ì„œëŠ” ì‹¤ì œ ì¿ í° ì ìš© ë§í¬ì™€ í• ì¸ ë‚´ì—­ ì¡°íšŒ ë§í¬ë¥¼ ëª…í™•íˆ êµ¬ë¶„í•´ì•¼ í•©ë‹ˆë‹¤.

#### âœ… ì‹¤ì œ ì¿ í° ì ìš© ë§í¬ (ì ìš©í•´ì•¼ í•˜ëŠ” ë§í¬)
- **íŒ¨í„´**: `href="javascript:insert_discount(ë§¤ê°œë³€ìˆ˜1,ë§¤ê°œë³€ìˆ˜2)"`
- **ì˜ˆì‹œ**: 
  - `javascript:insert_discount(328304,246)` â†’ "1ì‹œê°„ ìœ ë£Œí• ì¸ê¶Œ"
  - `javascript:insert_discount(328304,247)` â†’ "2ì‹œê°„ ë¬´ë£Œí• ì¸ê¶Œ"
- **íŒë³„ ì¡°ê±´**: `href.startswith('javascript:insert_discount')`

#### âŒ í• ì¸ ë‚´ì—­ ì¡°íšŒ ë§í¬ (ì œì™¸í•´ì•¼ í•˜ëŠ” ë§í¬)
- **íŒ¨í„´**: `href="./discountlist"` ë˜ëŠ” ê¸°íƒ€ í˜ì´ì§€ ì´ë™ ë§í¬
- **ì˜ˆì‹œ**: `./discountlist` â†’ "í• ì¸ë“±ë¡í˜„í™©" (ê´€ë¦¬ í˜ì´ì§€)
- **íŒë³„ ì¡°ê±´**: JavaScript í•¨ìˆ˜ê°€ ì•„ë‹Œ ì¼ë°˜ í˜ì´ì§€ ë§í¬

#### ğŸ”§ ì˜¬ë°”ë¥¸ ì¿ í° ë§í¬ íŒë³„ ì½”ë“œ
```python
# âœ… ì˜¬ë°”ë¥¸ C ë§¤ì¥ ì¿ í° ë§í¬ íŒë³„
if href and href.startswith('javascript:insert_discount'):
    coupon_links.append((text.strip(), href))

# âŒ ì˜ëª»ëœ íŒë³„ (ë„ˆë¬´ í¬ê´„ì )
if href and 'discount' in href.lower():
    coupon_links.append((text.strip(), href))  # í• ì¸ë“±ë¡í˜„í™©ë„ í¬í•¨ë¨
```

### ğŸ“‹ C ë§¤ì¥ ì…€ë ‰í„° ìš”ì•½

| ê¸°ëŠ¥ | ì…€ë ‰í„° | ì„¤ëª… |
|------|--------|------|
| ì‹¤ì œ ì¿ í° ì ìš© | `a[href^="javascript:insert_discount"]` | JavaScript í•¨ìˆ˜ í˜¸ì¶œ ë§í¬ë§Œ ì„ íƒ |
| í• ì¸ ë‚´ì—­ ì¡°íšŒ | `a[href="./discountlist"]` | í˜ì´ì§€ ì´ë™ ë§í¬ (ì œì™¸) |
| ì¿ í° ì‚­ì œ | `a[href^="javascript:deldiscount"]` | ì‚­ì œ í•¨ìˆ˜ (í•„ìš”ì‹œ) |

---

## ì°¸ê³ ì‚¬í•­

- ì‚¬ì´íŠ¸ êµ¬ì¡° ë³€ê²½ ì‹œ, ì…€ë ‰í„°(íŠ¹íˆ ë²„íŠ¼/í…Œì´ë¸”/íŒì—… ë“±)ëŠ” í•­ìƒ ìµœì‹ í™” í•„ìš”
- Playwrightì˜ locator, click, fill, keyboard.press ë“±ì€ ëª¨ë“  ì…€ë ‰í„° ì¡°í•©ì— ì‚¬ìš©í•  ìˆ˜ ìˆìŒ
- ë™ì  UI(ë¹„ë™ê¸° ë¡œë”© ë“±)ëŠ” `await page.wait_for_selector(...)`ë¡œ ì²˜ë¦¬ ê¶Œì¥

---

ì´ ë¬¸ì„œëŠ” ìƒˆë¡œìš´ ë§¤ì¥ì„ ì¶”ê°€í•˜ê±°ë‚˜ ê¸°ì¡´ ë§¤ì¥ì˜ ì›¹ì‚¬ì´íŠ¸ UIê°€ ë³€ê²½ë˜ì—ˆì„ ë•Œ, ì…€ë ‰í„°ë¥¼ ì–´ë–»ê²Œ ìˆ˜ì •í•˜ê³  ê´€ë¦¬í•´ì•¼ í•˜ëŠ”ì§€ì— ëŒ€í•œ ê°€ì´ë“œë¼ì¸ì„ ì œê³µí•œë‹¤.