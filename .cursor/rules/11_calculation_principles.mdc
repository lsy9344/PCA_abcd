---
title: "ì¿ í° ê³„ì‚° í•µì‹¬ ì›ì¹™ ë° ê²€ì¦ ê°€ì´ë“œ"
order: 11
category: "implementation"
alwaysApply: true
tags: ["calculation", "validation", "principles", "core"]
lastUpdated: "2024-01-15"
description: "ì¿ í° ê³„ì‚° ì‹œ ì ˆëŒ€ ì›ì¹™ê³¼ AI ì‹¤ìˆ˜ ë°©ì§€ ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸"
---

# ì¿ í° ê³„ì‚° í•µì‹¬ ì›ì¹™ ë° ê²€ì¦ ê°€ì´ë“œ

> **âš ï¸ ì´ ë¬¸ì„œëŠ” ì¿ í° ê³„ì‚° ë¡œì§ì˜ ì ˆëŒ€ ì›ì¹™ì„ ì •ì˜í•©ë‹ˆë‹¤. AIì™€ ê°œë°œìž ëª¨ë‘ ë°˜ë“œì‹œ ì¤€ìˆ˜í•´ì•¼ í•©ë‹ˆë‹¤.**

---

## ðŸŽ¯ **í•µì‹¬ ì›ì¹™ 1: ì „ì²´ ì‹œê°„ ê³ ë ¤ ì›ì¹™**

### **ì ˆëŒ€ ì›ì¹™**
```
ë¶€ì¡±ë¶„ = ëª©í‘œì‹œê°„ - (ê¸°ì¡´ë¬´ë£Œ + ê¸°ì¡´ìœ ë£Œ + ì¶”ê°€ë¬´ë£Œ)
```

### **ì˜¬ë°”ë¥¸ ê³„ì‚° íë¦„**
1. **ëª©í‘œ ì‹œê°„ ì„¤ì •**: í‰ì¼ 180ë¶„, ì£¼ë§ 120ë¶„
2. **í˜„ìž¬ ì ìš©ëœ ì‹œê°„ ê³„ì‚°**: ê¸°ì¡´ ë¬´ë£Œ + ê¸°ì¡´ ìœ ë£Œ (ë¶„ ë‹¨ìœ„)
3. **ë‚¨ì€ ì‹œê°„ ê³„ì‚°**: ëª©í‘œ - í˜„ìž¬ ì ìš©ëœ ì‹œê°„
4. **ì¶”ê°€ ë¬´ë£Œ ì¿ í° ì ìš©** (ì¡°ê±´ì— ë”°ë¼)
5. **ìµœì¢… ë¶€ì¡±ë¶„ ê³„ì‚°**: ë‚¨ì€ ì‹œê°„ - ì¶”ê°€ ë¬´ë£Œ ì‹œê°„
6. **ìœ ë£Œ ì¿ í°ìœ¼ë¡œ ë¶€ì¡±ë¶„ ì±„ìš°ê¸°**

---

## ðŸš¨ **AI ì‹¤ìˆ˜ ë°©ì§€ ì²´í¬ë¦¬ìŠ¤íŠ¸**

### **âŒ ì ˆëŒ€ í•˜ì§€ ë§ì•„ì•¼ í•  ê³„ì‚°**
```python
# âŒ ìž˜ëª»ëœ ê³„ì‚° - ë‹¨ìˆœ ê³±ì…ˆ ê¸ˆì§€
needed_paid = (target_hours - free_hours) * coupon_count

# âŒ ìž˜ëª»ëœ ê³„ì‚° - ê¸°ì¡´ ì ìš© ì‹œê°„ ë¬´ì‹œ
needed_paid = target_hours - 1  # ë¬´ë£Œ 1ê°œë§Œ ê³ ë ¤

# âŒ ìž˜ëª»ëœ ê³„ì‚° - ì‹œê°„ ë‹¨ìœ„ í˜¼ë™
remaining_hours = target_minutes - existing_hours  # ë‹¨ìœ„ ë¶ˆì¼ì¹˜
```

### **âœ… ì˜¬ë°”ë¥¸ ê³„ì‚° íŒ¨í„´**
```python
# âœ… ì˜¬ë°”ë¥¸ ê³„ì‚° - ëª¨ë“  ì‹œê°„ì„ ë¶„ ë‹¨ìœ„ë¡œ í†µì¼
target_minutes = 180  # í‰ì¼ 3ì‹œê°„
existing_minutes = existing_free_count * 60 + existing_paid_count * 60
remaining_minutes = max(0, target_minutes - existing_minutes)

# âœ… ì¶”ê°€ ë¬´ë£Œ ì¿ í° ì ìš© (ì¡°ê±´ í™•ì¸ í›„)
if can_apply_free and remaining_minutes >= 60:
    additional_free = 1
    remaining_minutes -= 60
else:
    additional_free = 0

# âœ… ìœ ë£Œ ì¿ í°ìœ¼ë¡œ ë‚˜ë¨¸ì§€ ì±„ìš°ê¸°
needed_paid = math.ceil(remaining_minutes / 60)  # ì˜¬ë¦¼ ì²˜ë¦¬
```

---

## ðŸ“Š **ì‹¤ì œ ê³„ì‚° ì˜ˆì‹œ (ê²€ì¦ìš©)**

### **ì‹œë‚˜ë¦¬ì˜¤ 1: A ë§¤ìž¥ í‰ì¼ (ëª©í‘œ 3ì‹œê°„)**
```python
# ìž…ë ¥
target_minutes = 180  # 3ì‹œê°„
existing_free = 0     # ê¸°ì¡´ ë¬´ë£Œ ì¿ í° ì—†ìŒ
existing_paid = 1     # ê¸°ì¡´ 1ì‹œê°„ ìœ ë£Œ ì¿ í° ìžˆìŒ

# ê³„ì‚° ê³¼ì •
current_applied = existing_free * 60 + existing_paid * 60  # 60ë¶„
remaining = target_minutes - current_applied              # 120ë¶„
additional_free = 1 if remaining >= 60 else 0            # 1ê°œ (60ë¶„)
final_remaining = remaining - additional_free * 60        # 60ë¶„
needed_paid = math.ceil(final_remaining / 60)            # 1ê°œ

# ê²°ê³¼
{"FREE_1HOUR": 1, "PAID_1HOUR": 1}  # ì´ 180ë¶„ ë‹¬ì„±
```

### **ì‹œë‚˜ë¦¬ì˜¤ 2: C ë§¤ìž¥ ì£¼ë§ (ëª©í‘œ 2ì‹œê°„, 2ì‹œê°„ ë¬´ë£Œì¿ í°)**
```python
# ìž…ë ¥
target_minutes = 120  # 2ì‹œê°„
existing_free_2h = 0  # ê¸°ì¡´ 2ì‹œê°„ ë¬´ë£Œ ì¿ í° ì—†ìŒ
existing_paid = 0     # ê¸°ì¡´ ìœ ë£Œ ì¿ í° ì—†ìŒ

# ê³„ì‚° ê³¼ì •
current_applied = existing_free_2h * 120 + existing_paid * 60  # 0ë¶„
remaining = target_minutes - current_applied                   # 120ë¶„
additional_free_2h = 1 if remaining >= 120 else 0            # 1ê°œ (120ë¶„)
final_remaining = remaining - additional_free_2h * 120        # 0ë¶„
needed_paid = math.ceil(final_remaining / 60) if final_remaining > 0 else 0  # 0ê°œ

# ê²°ê³¼
{"FREE_2HOUR": 1, "PAID_1HOUR": 0}  # ì´ 120ë¶„ ë‹¬ì„±
```

---

## ðŸ” **ë§¤ìž¥ë³„ íŠ¹ìˆ˜ ê·œì¹™ ì²˜ë¦¬**

### **A ë§¤ìž¥: í‘œì¤€ 1ì‹œê°„ ê¸°ì¤€**
- ë¬´ë£Œ: 1ì‹œê°„ Ã— 1ê°œ = 60ë¶„
- ìœ ë£Œ: 1ì‹œê°„ Ã— Nê°œ = 60Në¶„
- ê³„ì‚°: `math.ceil(remaining_minutes / 60)`

### **B ë§¤ìž¥: 30ë¶„ ìœ ë£Œ ì¿ í° ë³´ì •**
```python
# B ë§¤ìž¥ íŠ¹ìˆ˜ ê³„ì‚°
base_paid_needed = math.ceil(remaining_minutes / 60)  # 1ì‹œê°„ ê¸°ì¤€
actual_paid_needed = base_paid_needed * 2             # 30ë¶„ ì¿ í°ì´ë¯€ë¡œ 2ë°°
```

### **C ë§¤ìž¥: 2ì‹œê°„ ë¬´ë£Œ ì¿ í°**
- ë¬´ë£Œ: 2ì‹œê°„ Ã— 1ê°œ = 120ë¶„
- ìœ ë£Œ: 1ì‹œê°„ Ã— Nê°œ = 60Në¶„
- íŠ¹ë³„ížˆ ë‹¤ë¥¸ ê³„ì‚° ë¶ˆí•„ìš” (duration_minutes ì„¤ì •ìœ¼ë¡œ ìžë™ ì²˜ë¦¬)

---

## ðŸ§ª **ê²€ì¦ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤**

### **í•„ìˆ˜ ê²€ì¦ í•­ëª©**
```python
def validate_calculation(target_minutes, existing_coupons, result_coupons):
    """ê³„ì‚° ê²°ê³¼ ê²€ì¦"""
    
    # 1. ì‹œê°„ ë‹¨ìœ„ ì¼ì¹˜ í™•ì¸
    assert isinstance(target_minutes, int), "ëª©í‘œ ì‹œê°„ì€ ë¶„ ë‹¨ìœ„ ì •ìˆ˜ì—¬ì•¼ í•¨"
    
    # 2. ì´ ì ìš© ì‹œê°„ ê³„ì‚°
    total_applied = 0
    for coupon_type, count in result_coupons.items():
        duration = get_coupon_duration(coupon_type)  # ì¿ í°ë³„ ì‹œê°„ ê°€ì ¸ì˜¤ê¸°
        total_applied += count * duration
    
    # 3. ëª©í‘œ ì‹œê°„ ë‹¬ì„± í™•ì¸
    assert total_applied >= target_minutes, f"ëª©í‘œ ë¯¸ë‹¬ì„±: {total_applied} < {target_minutes}"
    
    # 4. ê³¼ë„í•œ ì´ˆê³¼ ë°©ì§€ (1ì‹œê°„ ì´ë‚´ ì´ˆê³¼ë§Œ í—ˆìš©)
    assert total_applied - target_minutes <= 60, f"ê³¼ë„í•œ ì´ˆê³¼: {total_applied - target_minutes}ë¶„"
    
    # 5. ë¬´ë£Œ ì¿ í° 1ê°œ ì œí•œ í™•ì¸
    free_count = sum(count for coupon_type, count in result_coupons.items() 
                    if 'FREE' in coupon_type)
    assert free_count <= 1, f"ë¬´ë£Œ ì¿ í° ì´ˆê³¼ ì‚¬ìš©: {free_count}ê°œ"
    
    return True
```

### **ì‹¤íŒ¨ íŒ¨í„´ ê°ì§€**
```python
# âŒ ì´ëŸ° ê²°ê³¼ê°€ ë‚˜ì˜¤ë©´ ê³„ì‚° ì˜¤ë¥˜
{"FREE_1HOUR": 2, "PAID_1HOUR": 1}  # ë¬´ë£Œ ì¿ í° 2ê°œ (ë¶ˆê°€ëŠ¥)
{"FREE_1HOUR": 0, "PAID_1HOUR": 5}  # ë¬´ë£Œ ì¿ í° ë¯¸ì‚¬ìš© (ë¹„íš¨ìœ¨)
{"FREE_1HOUR": 1, "PAID_1HOUR": 10} # ê³¼ë„í•œ ì´ˆê³¼ (6ì‹œê°„ ì´ˆê³¼)
```

---

## ðŸŽ¯ **ê°œë°œìž ì²´í¬ë¦¬ìŠ¤íŠ¸**

### **ì½”ë“œ ìž‘ì„± ì‹œ í•„ìˆ˜ í™•ì¸**
- [ ] ëª¨ë“  ì‹œê°„ ê³„ì‚°ì„ ë¶„ ë‹¨ìœ„ë¡œ í†µì¼í–ˆëŠ”ê°€?
- [ ] ê¸°ì¡´ ì ìš©ëœ ì¿ í° ì‹œê°„ì„ ì˜¬ë°”ë¥´ê²Œ ì°¨ê°í–ˆëŠ”ê°€?
- [ ] ë¬´ë£Œ ì¿ í° ì ìš© ì¡°ê±´ì„ í™•ì¸í–ˆëŠ”ê°€?
- [ ] ìœ ë£Œ ì¿ í° ê°œìˆ˜ë¥¼ ì˜¬ë¦¼(ceil) ì²˜ë¦¬í–ˆëŠ”ê°€?
- [ ] ë§¤ìž¥ë³„ íŠ¹ìˆ˜ ê·œì¹™ì„ ì ìš©í–ˆëŠ”ê°€?

### **í…ŒìŠ¤íŠ¸ ì‹œ í•„ìˆ˜ í™•ì¸**
- [ ] ëª©í‘œ ì‹œê°„ì„ ì •í™•ížˆ ë‹¬ì„±í•˜ëŠ”ê°€?
- [ ] ë¬´ë£Œ ì¿ í°ì„ 1ê°œë§Œ ì‚¬ìš©í•˜ëŠ”ê°€?
- [ ] ê³¼ë„í•œ ì‹œê°„ ì´ˆê³¼ê°€ ì—†ëŠ”ê°€? (60ë¶„ ì´ë‚´)
- [ ] Edge Case ì²˜ë¦¬ê°€ ì˜¬ë°”ë¥¸ê°€? (ì´ë¯¸ ëª©í‘œ ë‹¬ì„±í•œ ê²½ìš° ë“±)

---

## ðŸš¨ **ìž¬ë°œ ë°©ì§€ ì›ì¹™**

### **AI ê°œë°œ ì‹œ ì£¼ì˜ì‚¬í•­**
1. **ë‹¨ìˆœ ê³±ì…ˆ ê³„ì‚° ê¸ˆì§€**: `target_hours * coupon_count` í˜•íƒœ ì ˆëŒ€ ê¸ˆì§€
2. **ì‹œê°„ ë‹¨ìœ„ í˜¼ë™ ë°©ì§€**: ëª¨ë“  ê³„ì‚°ì„ ë¶„ ë‹¨ìœ„ë¡œ í†µì¼
3. **ê¸°ì¡´ ì¿ í° ê³ ë ¤**: í˜„ìž¬ ì ìš©ëœ ì¿ í°ì„ ë°˜ë“œì‹œ ì°¨ê°
4. **ì˜¬ë¦¼ ì²˜ë¦¬**: ë¶€ì¡±ë¶„ì„ ì¿ í° ê°œìˆ˜ë¡œ ë³€í™˜ ì‹œ `math.ceil()` ì‚¬ìš©

### **ì½”ë“œ ë¦¬ë·° ì²´í¬í¬ì¸íŠ¸**
- ê³„ì‚° ë¡œì§ì— í•˜ë“œì½”ë”©ëœ ìˆ«ìžê°€ ìžˆëŠ”ê°€?
- ëª¨ë“  ë¶„ê¸°ì—ì„œ ëª©í‘œ ì‹œê°„ì„ ë‹¬ì„±í•˜ëŠ”ê°€?
- ì˜ˆì™¸ ìƒí™©(ì´ë¯¸ ë‹¬ì„±, ë¬´ë£Œ ì¿ í° ì‚¬ìš© ë¶ˆê°€ ë“±) ì²˜ë¦¬ê°€ ì˜¬ë°”ë¥¸ê°€?

---

**ì´ ì›ì¹™ë“¤ì„ ì² ì €ížˆ ì¤€ìˆ˜í•˜ì—¬ ì •í™•í•˜ê³  ì¼ê´€ëœ ì¿ í° ê³„ì‚° ë¡œì§ì„ êµ¬í˜„í•˜ì„¸ìš”!**